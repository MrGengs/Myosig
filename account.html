<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>Myosig - Akun</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’ª</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
    <div class="container">
        <!-- Page Header -->
        <div class="page-header fade-in" style="position: relative; padding-top: 3rem;">
            <button id="editProfileBtn" onclick="toggleEditMode()" class="btn btn-secondary" style="position: absolute; top: 1rem; right: 1rem; padding: 0.5rem; min-width: auto; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; box-shadow: var(--shadow-sm); z-index: 10; flex-shrink: 0;" title="Edit Profil">
                <i class="bi bi-pencil-square"></i>
            </button>
            <div id="userProfilePhoto" style="width: 100px; height: 100px; background: var(--gradient-primary); border-radius: 50%; margin: 0 auto 1rem; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: var(--white); box-shadow: var(--shadow-md); overflow: hidden; position: relative;">
                <i class="bi bi-person-fill" id="userProfileIcon"></i>
                <img id="userProfileImage" src="" alt="Profile Photo" style="width: 100%; height: 100%; object-fit: cover; display: none;">
            </div>
            <h1 id="userName">Pengguna</h1>
            <p id="userEmail">user@example.com</p>
        </div>


        <!-- Account Settings Card -->
        <div class="card fade-in">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="bi bi-gear card-icon"></i>
                    Pengaturan Akun
                </h2>
            </div>
            
            <a href="#" onclick="event.preventDefault(); changePassword();" class="exercise-item" style="text-decoration: none; color: inherit;">
                <div class="exercise-icon">
                    <i class="bi bi-key"></i>
                </div>
                <div class="exercise-content">
                    <div class="exercise-name">Ubah Kata Sandi</div>
                    <div class="exercise-duration">Perbarui kata sandi akun Anda</div>
                </div>
                <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
            </a>
            
            <a href="#" onclick="event.preventDefault(); notificationSettings();" class="exercise-item" style="text-decoration: none; color: inherit;">
                <div class="exercise-icon">
                    <i class="bi bi-bell"></i>
                </div>
                <div class="exercise-content">
                    <div class="exercise-name">Notifikasi</div>
                    <div class="exercise-duration">Kelola pengaturan notifikasi</div>
                </div>
                <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
            </a>
            
            <a href="#" onclick="event.preventDefault(); privacySettings();" class="exercise-item" style="text-decoration: none; color: inherit;">
                <div class="exercise-icon">
                    <i class="bi bi-shield-check"></i>
                </div>
                <div class="exercise-content">
                    <div class="exercise-name">Privasi & Keamanan</div>
                    <div class="exercise-duration">Kelola privasi dan keamanan data</div>
                </div>
                <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
            </a>
        </div>


        <!-- App Information Card -->
        <div class="card fade-in">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="bi bi-info-circle card-icon"></i>
                    Tentang Aplikasi
                </h2>
            </div>
            
            <div style="text-align: center; padding: 1rem 0;">
                <div style="font-size: 3rem; color: var(--primary-blue); margin-bottom: 1rem;">
                    <i class="bi bi-heart-pulse-fill"></i>
                </div>
                <h3>Myosig</h3>
                <p style="color: var(--text-light); margin-bottom: 1rem;">Smart Wearable Device for Rehabilitation Stroke Patient</p>
                <p style="font-size: 0.85rem; color: var(--text-light);">Versi 1.0.0</p>
            </div>
            
            <div style="border-top: 1px solid var(--lighter-blue); padding-top: 1rem; margin-top: 1rem;">
                <a href="#" onclick="event.preventDefault(); showHelpSupport();" class="exercise-item" style="text-decoration: none; color: inherit;">
                    <div class="exercise-icon">
                        <i class="bi bi-question-circle"></i>
                    </div>
                    <div class="exercise-content">
                        <div class="exercise-name">Bantuan & Dukungan</div>
                        <div class="exercise-duration">Pusat bantuan dan FAQ</div>
                    </div>
                    <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
                </a>
                
                <a href="#" onclick="event.preventDefault(); showTermsConditions();" class="exercise-item" style="text-decoration: none; color: inherit;">
                    <div class="exercise-icon">
                        <i class="bi bi-file-text"></i>
                    </div>
                    <div class="exercise-content">
                        <div class="exercise-name">Syarat & Ketentuan</div>
                        <div class="exercise-duration">Baca syarat dan ketentuan penggunaan</div>
                    </div>
                    <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
                </a>
                
                <a href="#" onclick="event.preventDefault(); showPrivacyPolicy();" class="exercise-item" style="text-decoration: none; color: inherit;">
                    <div class="exercise-icon">
                        <i class="bi bi-shield-lock"></i>
                    </div>
                    <div class="exercise-content">
                        <div class="exercise-name">Kebijakan Privasi</div>
                        <div class="exercise-duration">Baca kebijakan privasi kami</div>
                    </div>
                    <i class="bi bi-chevron-right" style="color: var(--text-light); font-size: 1.5rem;"></i>
                </a>
            </div>
        </div>

        <!-- Logout Button -->
        <div class="card fade-in">
            <button onclick="logout()" class="btn btn-danger">
                <i class="bi bi-box-arrow-right"></i> Keluar dari Akun
            </button>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal-overlay" style="display: none; align-items: center; justify-content: center;" onclick="if(event.target === this) closeEditModal();">
        <div class="modal-content" style="max-width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; margin: auto; animation: modalSlideIn 0.3s ease;" onclick="event.stopPropagation();">
            <div class="modal-header" style="display: flex; align-items: center; justify-content: space-between; padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--lighter-blue);">
                <h3 style="margin: 0; font-size: 1.25rem; font-weight: 600; color: var(--text-dark);">
                    <i class="bi bi-pencil-square" style="color: var(--primary-blue);"></i>
                    Edit Profil
                </h3>
                <button class="modal-close-btn" onclick="closeEditModal()" style="background: none; border: none; font-size: 1.5rem; color: var(--text-light); cursor: pointer; padding: 0; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center; transition: var(--transition);" onmouseover="this.style.color='var(--text-dark)'" onmouseout="this.style.color='var(--text-light)'">&times;</button>
            </div>
            
            <div class="modal-body" style="padding: 1.5rem; max-height: calc(90vh - 150px); overflow-y: auto;">
                <!-- Profile Information Section -->
                <div class="card" style="margin-bottom: 1.5rem; box-shadow: none; border: 1px solid var(--lighter-blue);">
                    <div class="card-header" style="padding: 1rem;">
                        <h2 class="card-title" style="font-size: 1.1rem; margin: 0;">
                            <i class="bi bi-person card-icon"></i>
                            Informasi Profil
                        </h2>
                    </div>
                    
                    <div style="padding: 1rem;">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-person"></i> Nama Lengkap
                            </label>
                            <input 
                                type="text" 
                                id="profileName" 
                                class="form-input" 
                                placeholder="Masukkan nama lengkap"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-envelope"></i> Email
                            </label>
                            <input 
                                type="email" 
                                id="profileEmail" 
                                class="form-input" 
                                placeholder="Masukkan email"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-telephone"></i> Nomor Telepon
                            </label>
                            <input 
                                type="tel" 
                                id="profilePhone" 
                                class="form-input" 
                                placeholder="Masukkan nomor telepon (contoh: 081234567890)"
                                pattern="[0-9]{10,13}"
                            >
                            <small style="color: var(--text-light); font-size: 0.8rem; margin-top: 0.25rem; display: block;">
                                Format: 10-13 digit angka
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-calendar"></i> Tanggal Lahir
                            </label>
                            <input 
                                type="date" 
                                id="profileBirthDate" 
                                class="form-input"
                                max=""
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-gender-ambiguous"></i> Jenis Kelamin
                            </label>
                            <select id="profileGender" class="form-input">
                                <option value="">Pilih Jenis Kelamin</option>
                                <option value="Laki-laki">Laki-laki</option>
                                <option value="Perempuan">Perempuan</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-geo-alt"></i> Alamat
                            </label>
                            <textarea 
                                id="profileAddress" 
                                class="form-input" 
                                rows="3"
                                placeholder="Masukkan alamat lengkap"
                            ></textarea>
                        </div>
                    </div>
                </div>

                <!-- Health Information Section -->
                <div class="card" style="box-shadow: none; border: 1px solid var(--lighter-blue);">
                    <div class="card-header" style="padding: 1rem;">
                        <h2 class="card-title" style="font-size: 1.1rem; margin: 0;">
                            <i class="bi bi-heart-pulse card-icon"></i>
                            Informasi Kesehatan
                        </h2>
                    </div>
                    
                    <div style="padding: 1rem;">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-calendar-event"></i> Tanggal Stroke
                            </label>
                            <input 
                                type="date" 
                                id="strokeDate" 
                                class="form-input"
                            >
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="bi bi-file-medical"></i> Catatan Medis
                            </label>
                            <textarea 
                                id="medicalNotes" 
                                class="form-input" 
                                rows="4"
                                placeholder="Masukkan catatan medis atau informasi penting lainnya"
                            ></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 0.75rem; padding: 1.25rem 1.5rem; border-top: 1px solid var(--lighter-blue);">
                <button onclick="saveAllProfileData()" class="btn btn-primary">
                    <i class="bi bi-check-circle"></i> Simpan Semua
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item">
            <i class="bi bi-house-door"></i>
            <span>Beranda</span>
        </a>
        <a href="sensors.html" class="nav-item">
            <i class="bi bi-activity"></i>
            <span>Monitoring</span>
        </a>
        <a href="patient.html" class="nav-item">
            <i class="bi bi-person-heart"></i>
            <span>Pasien</span>
        </a>
        <a href="account.html" class="nav-item active">
            <i class="bi bi-person-fill" style="color: #5B9BD5 !important; display: inline-block !important; visibility: visible !important; opacity: 1 !important; font-size: 1.5rem !important; z-index: 1000 !important; position: relative !important; -webkit-text-fill-color: #5B9BD5 !important; background: transparent !important; font-family: 'bootstrap-icons' !important;"></i>
            <span>Akun</span>
        </a>
    </nav>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script src="js/config.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/modal.js"></script>
    <script src="js/account.js"></script>
    <script src="js/navigation.js"></script>
</body>
</html>
